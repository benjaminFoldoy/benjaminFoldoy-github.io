<!DOCTYPE html>
<html>
    <head>
        <Title>Number Sorting Algorythm</Title>
        <style>
            @font-face {
                font-family: Beans;
                src: url("https://benjaminfoldoy.github.io/Assets/pixel-perfect-beans.ttf");
            }
            h1{font-family: Beans; size: 10%; color: #007a99; text-shadow: 3px 3px #005d6d; border: 3px solid black;}
            h2{font-family: Beans; size: 8%; position: relative; color: #007a99; text-shadow: 3px 3px #005d6d; text-align: right; z-index: 10; float: left;}
            h3{font-family: Beans; size: 8%; position: relative; color: #000000; text-shadow: 3px 3px #cccccc; text-align: center; background-color: white; box-shadow: 3px 3px #003d4d; z-index: 10; border: 3px solid black; float: left;}
            p{font-family: Beans; size: 1%; color: #007a99; text-shadow: 3px 3px;}
        </style>
    </head>
<body style="background-color: #006680;">
    <div style="width: 80%; height: fit-content; left: 10%; top: 10%; background-color: #9FE4FF; position: absolute; z-index: 1; box-shadow: 10px 10px #003d4d; border:3px solid black; padding-bottom: 30px;">
        
        <h2 id="LOGO" style="width: 80%; left: 10%; text-align: center; position: relative;">NUMBER SORTING ALGORYTHM</h2>

        <div id="ViewContainer" style="width: 80%; height:40rem ;margin-top: 10%; margin-left: 8%; background-color: white; position: relative; padding: 2% 2% 2% 2%; box-shadow: 3px 3px #003d4d; border:3px solid black;">

        </div>
        
        <div id="SSRContainer" style="border: 3px solid red; z-index: 100; position: relative; float: left; width:fit-content; width: 94%; margin-left: 8%;">
            <h3 id="START" onclick="SetIntervalC();" style="width: 24%;">START</h3>
            <h3 id="STOP" style="width: 24%; margin-left: 8%;">STOP</h3>
            <h3 id="RESET" oninput="OnInputUpdate()" style="width: 24%; margin-left: 8%;">RESET</h3>
        </div>
        <div id="COLORS" style="border: 3px solid red; z-index: 100; position: relative; overflow: hidden;margin-left: 8%; float: left;">
            <div style="width: 18px; height: 18px; background-color: #007a99; border: 3px solid black; box-shadow: 3px 3px #003d4d;"></div>
            <div style="width: 18px; height: 18px; background-color: #309900; border: 3px solid black; box-shadow: 3px 3px #003d4d;"></div>
            <div style="width: 18px; height: 18px; background-color: #996300; border: 3px solid black; box-shadow: 3px 3px #003d4d;"></div>
            <div style="width: 18px; height: 18px; background-color: #7a0099; border: 3px solid black; box-shadow: 3px 3px #003d4d;"></div>
        </div>
        <div id="NOVINPUTCONTAINER" style="border: 3px solid red; z-index: 100; position: relative; float: left; width: 40%;">
            <h2 id="NOVTEXT" style="font-family: Beans; height: 5%; margin-top: 0%; position: relative; text-align: center; width: 100%;">NUMBER OF VALUES</h2>
            <input oninput="OnInputUpdate()" type="text" id="NOV" value="10" style="width: 50%; height: 70px; font-family: Beans; font-size: 190%; margin-left: 25%; top: 85%; text-align: center; position: relative; text-shadow: 3px 3px #cccccc; box-shadow: 3px 3px #003d4d;border:3px solid black; clear: right;">
        </div>
        <div id="SPEEDINPUTCONTAINER" style="border: 3px solid red; z-index: 100; position: relative; float: left; width: 40%;">
            <h2 id="SPEEDTEXT" style="font-family: Beans; height: 5%; margin-top: 0%; position: relative; text-align: center; width: 100%;">SPEED</h2>
            <input oninput="OnInputUpdate()" type="text" id="SPEED" value="10" style="width: 50%; height: 70px; font-family: Beans; font-size: 190%; margin-left: 25%; top: 85%; text-align: center; position: relative; text-shadow: 3px 3px #cccccc; box-shadow: 3px 3px #003d4d;border:3px solid black; clear: right;">
        </div>
    </div> 
</body>
<script>

    var e = 0;
    var c = 0;
    var highestValue = 0;
    var highestValueID = 0;
    var highestHeightInPERCENT = 0;
    var numberOfIntervals = 0;
    var interval = [setInterval(MyAlgorythm, 1000)];
    clearInterval(interval[0]);
    interval[0] = null;
    var scanSpeed = 1;
    var logicInterval = setInterval(Logic, 100);
    var numberOfValues = 0;

    OnInputUpdate();

    function SetColor(x)
    {
        var minColor = [159, 228, 255];
        var maxColor = [0, 61, 77];

        var r = Math.floor( maxColor[0] + ((minColor[0] - maxColor[0]) / (document.getElementById("ViewContainer").offsetHeight)) * x);
        var g = Math.floor( maxColor[1] + ((minColor[1] - maxColor[1]) / (document.getElementById("ViewContainer").offsetHeight)) * x);
        var b = Math.floor( maxColor[2] + ((minColor[2] - maxColor[2]) / (document.getElementById("ViewContainer").offsetHeight)) * x);

        return "rgb(" + r + "," + g + "," + b + ")"
    }

    function OnInputUpdate()
    {
        for (var p = 0; p <= numberOfIntervals; p++)
        {
            clearInterval(interval[p]);
            interval[p] = null;
        }

        //removes red line if it is present
        try
        {
            document.getElementById(99999).remove();
        }
        catch{}

        //removes scan line if it is present
        try
        {
            document.getElementById(99998).remove();
        }
        catch{}

        //Clears th Check-Loop
        try
        {
            clearInterval(interval);
            scanInterval = null;
        }
        catch{}

        //sets the number of values that should be loaded
        numberOfValues = document.getElementById("NOV").value;

        //Removes all lines
        for (var x = 0; x < 1000; x++)
        {
            try
            {
                document.getElementById(x).remove();
            }
            catch
            {
                x = 1000;
            }
        }
        
        //creates a div for each value
        for (var x = 0; x < numberOfValues; x++)
        {
            try
            {
                var div = document.createElement("div");
                var rNum = Math.random();
                var height = Math.floor(rNum * Math.floor(document.getElementById("ViewContainer").offsetHeight * 0.90));
                div.id = x;
                div.style.width = (1/numberOfValues) * 100 + "%";
                div.style.height = height + "px";
                div.style.value = rNum;
                div.style.left = (((1/numberOfValues) * 100 * 0.996) * x) + "%";
                div.style.position = "relative";
                div.style.top = "100%";
                div.style.marginTop= -height + "px";
                div.style.backgroundColor = SetColor(height);
                document.getElementById("ViewContainer").append(div);
            }
            catch
            {
                x = 1000;
            }
        }
    }

    function updateHeight()
    {
        for(var s = 0; s < 1000; s++)
        {
            try
            {
                document.getElementById(s).style.height =  Math.floor(document.getElementById(s).style.height.value * Math.floor(document.getElementById("ViewContainer").offsetHeight)) + "px";
            }
            catch{}
        }
    }

    function SetIntervalC()
    {

        for (var p = 0; p <= numberOfIntervals; p++)
        {
            clearInterval(interval[p]);
            interval[p] = null;
        }

        e = 0;
        c = 0;
        highestValue = 0;
        highestValueID = 0;
        highestHeightInPERCENT = 0;
        for (var u = 0; u < scanSpeed; u++)
        {
            interval.push(setInterval(MyAlgorythm, 100));
            numberOfIntervals++;
        }
        
    }
    
    function MyAlgorythm()
    {
        //Checking the values, and creating a red colored div on top of the highest one...
        
        //Remove the scanLine
        try{document.getElementById(99998).remove();}
        catch{}

        //Get the Div at the currently scanned position
        var div = document.getElementById(c);

        //Creates a red and a white div for potentially beingplaced in the form
        var redDiv = document.createElement("div");
        redDiv.style.backgroundColor = "#ff0000";
        redDiv.id = 99999;

        var whiteDiv = document.createElement("div");
        whiteDiv.style.backgroundColor = "#00ffff";
        whiteDiv.id = 99998;


        //placing a white div on top of the current value
        if(scanSpeed > 0)
        {
            if(parseInt(div.style.height) <= highestValue)
            {
                try{document.getElementById(99998).remove();}
                catch{}
                
                whiteDiv.style.height = div.style.height;
                whiteDiv.style.width = div.style.width;
                whiteDiv.style.position = div.style.position;
                whiteDiv.style.zIndex = 10;
                whiteDiv.style.top = div.style.top;
                whiteDiv.style.left = div.style.left;
                whiteDiv.style.marginTop = div.style.marginTop;

                document.getElementById("ViewContainer").append(whiteDiv);
            }
        }
        

        //placing a red div on top of the current value, if it is the highest one
        if(parseInt(div.style.height) >= highestValue)
        {
            try{document.getElementById(99999).remove();}
            catch{}
            
            redDiv.style.height = div.style.height;
            redDiv.style.width = div.style.width;
            redDiv.style.position = div.style.position;
            redDiv.style.zIndex = 10;
            redDiv.style.top = div.style.top;
            redDiv.style.left = div.style.left;
            redDiv.style.marginTop = div.style.marginTop;
            
            highestValue = parseInt(div.style.height);
            highestValueID = c;
            highestHeightInPERCENT = div.value;

            document.getElementById("ViewContainer").append(redDiv);
        }
        //alert( String(e) + String(c));

        //selecting the next value for scanning...
        c++;
        if(c == numberOfValues)
        {
            //changes in this scan
            if(e != highestValueID)
            {
            document.getElementById(e).id = 1111111;
            document.getElementById(highestValueID).id = e;
            document.getElementById(1111111).id = highestValueID;

            document.getElementById(highestValueID).style.left = (((1/numberOfValues) * 100 * 0.996) * highestValueID) + "%";
            document.getElementById(e).style.left = (((1/numberOfValues) * 100 * 0.996) * e) + "%";
            }
            
            else
            {

            }
            //for next scan
            c = ++e;
            highestValue = parseInt(document.getElementById(c).style.height);
            highestValueID = e;
        }
        if(e == numberOfValues)
        {
            for (var p = 0; p <= numberOfIntervals; p++)
            {
                clearInterval(interval[p]);
                interval[p] = null;
            }
        }
    }

    function Logic()
    {

        updateHeight();

        if(window.innerWidth < 1150)
        {
            document.getElementById("NOVTEXT").innerHTML = "NOV";
        }
        else
        {
            document.getElementById("NOVTEXT").innerHTML = "NUMBER OF VALUES";
        }
    }
    
</script>

</html>
